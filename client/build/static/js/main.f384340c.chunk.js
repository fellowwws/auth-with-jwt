(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{162:function(e,t,a){e.exports=a(309)},168:function(e,t,a){},176:function(e,t){},178:function(e,t){},190:function(e,t){},192:function(e,t){},220:function(e,t){},222:function(e,t){},223:function(e,t){},229:function(e,t){},231:function(e,t){},249:function(e,t){},251:function(e,t){},263:function(e,t){},266:function(e,t){},309:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(55),c=a.n(l),o=(a(167),a(168),a(161)),s=a(46),i=a(12),u=a(310),m=a(311),d=a(312),f=function(e){var t=e.children;return r.a.createElement(u.a,null,r.a.createElement(m.a,null,r.a.createElement(d.a,{sm:"12",md:{size:8,offset:2}},t)))},E=a(29),h=a(13),p=a(313),g=a(327),b=a(314),v=a(315),j=a(316),O=a(317),w=a(158),y=a(318),S=function(e){return N(e)?"Email address is required":!/^([a-zA-Z0-9_\-\.]+)@([a-zA-Z0-9_\-\.]+)\.([a-zA-Z]{2,5})$/.test(e)&&"Email address must be valid. E.g you@example.com"},C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return N(e)?"Password is required":(e.length<t||e.length>a)&&"Password length must be min ".concat(t,", max ").concat(a," chars")},x=function(e,t){return N(t)?"Confirm password is required":!k(e,t)&&"Confirm password does not match password"},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return""===e.trim()},k=function(e,t){return e===t},P=function(e){return String(e).trim()},I=function(e){var t=function(e){return e.charAt(0).toUpperCase()+e.slice(1)};return e.includes("-")?e.split("-").map(t).join("-"):t(e)},z=a(82),A=a.n(z),L=Object(n.createContext)();var T=function(e){var t=Object(n.useState)(null),a=Object(h.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)("loading"),s=Object(h.a)(o,2),i=s[0],u=s[1];Object(n.useEffect)((function(){var e=localStorage.getItem("token");e?(e=A.a.decode(e),m(e)?(c(null),u("done")):(c(e),u("done"))):(c(null),u("done"))}),[]);var m=function(e){return e.exp<Date.now()/1e3};return r.a.createElement(L.Provider,{value:{user:l,authState:i,logIn:function(e,t){return new Promise((function(a,n){fetch("/auth/login",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){e.ok?e.json().then((function(e){localStorage.setItem("token",e.token);var t=A.a.decode(e.token);c(t),a()})):e.json().then((function(e){return n(e)}))})).catch((function(e){return n(e)}))}))},logOut:function(){localStorage.removeItem("token"),c(null)}}},e.children)};var q=function(){var e=Object(n.useContext)(L),t=Object(i.g)(),a=Object(n.useState)(""),l=Object(h.a)(a,2),c=l[0],o=l[1],s=Object(n.useState)(""),u=Object(h.a)(s,2),f=u[0],k=u[1],z=Object(n.useState)(""),A=Object(h.a)(z,2),T=A[0],q=A[1],J=Object(n.useState)(""),D=Object(h.a)(J,2),F=D[0],U=D[1],W=Object(n.useState)(""),Z=Object(h.a)(W,2),B=Z[0],$=Z[1],_=Object(n.useState)({forename:!1,surname:!1,email:!1,password:!1,confirm:!1}),G=Object(h.a)(_,2),H=G[0],M=G[1],K=Object(n.useState)(!1),Q=Object(h.a)(K,2),R=Q[0],V=Q[1],X=Object(n.useState)(!1),Y=Object(h.a)(X,2),ee=Y[0],te=Y[1];return Object(n.useEffect)((function(){M({forename:N(c),surname:N(f),email:S(T),password:C(F),confirm:x(F,B)})}),[c,f,T,F,B]),r.a.createElement(p.a,{onSubmit:function(a){a.preventDefault(),H.forename||H.surname||H.email||H.password||H.confirm?!1===R&&V(!0):(te(!0),setTimeout((function(){(function(e,t,a,n){return new Promise((function(r,l){fetch("/auth/signup",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({forename:e,surname:t,email:a,password:n})}).then((function(e){e.ok?e.json().then((function(e){return r(e)})):e.json().then((function(e){return l(e)}))})).catch((function(e){return l(e)}))}))})(c,f,T,F).then((function(){e.logIn(T,F).then((function(){t.push("/")})).catch((function(e){return console.log(e)})),te(!1)})).catch((function(e){M(Object(E.a)(Object(E.a)({},H),{},{server:e.message})),te(!1)}))}),1e3))}},H.server&&r.a.createElement(g.a,{color:"danger"},r.a.createElement("strong",null,"Error")," ",H.server),r.a.createElement(m.a,{form:!0},r.a.createElement(d.a,{md:6},r.a.createElement(b.a,null,r.a.createElement(v.a,{className:"sr-only",for:"first-name"},"First Name"),r.a.createElement(j.a,{value:c,onChange:function(e){return o(I(P(e.target.value)))},type:"text",name:"first-name",id:"first-name",placeholder:"First name",invalid:R&&H.forename}),r.a.createElement(O.a,null,"First name is required"))),r.a.createElement(d.a,{md:6},r.a.createElement(b.a,null,r.a.createElement(v.a,{className:"sr-only",for:"last-name"},"Last Name"),r.a.createElement(j.a,{value:f,onChange:function(e){return k(I(P(e.target.value)))},type:"text",name:"last-name",id:"last-name",placeholder:"Last name",invalid:R&&H.surname}),r.a.createElement(O.a,null,"Last name is required")))),r.a.createElement(b.a,null,r.a.createElement(v.a,{className:"sr-only",for:"email"},"Email"),r.a.createElement(j.a,{value:T,onChange:function(e){return q(P(e.target.value))},type:"email",name:"email",id:"email",placeholder:"Email address",invalid:R&&H.email}),r.a.createElement(O.a,null,H.email)),r.a.createElement(b.a,null,r.a.createElement(v.a,{className:"sr-only",for:"password"},"Password"),r.a.createElement(j.a,{value:F,onChange:function(e){return U(P(e.target.value))},type:"password",name:"password",id:"password",placeholder:"Password",invalid:R&&H.password}),r.a.createElement(O.a,null,H.password)),r.a.createElement(b.a,null,r.a.createElement(v.a,{className:"sr-only",for:"confirmPassword"},"Confirm Password"),r.a.createElement(j.a,{value:B,onChange:function(e){return $(P(e.target.value))},type:"password",name:"password",id:"confirmPassword",placeholder:"Confirm Password",invalid:R&&H.confirm}),r.a.createElement(O.a,null,H.confirm)),r.a.createElement(w.a,{block:!0,style:{display:"flex",alignItems:"center",justifyContent:"center"},color:"primary",size:"lg",disabled:ee},ee?r.a.createElement(y.a,{color:"light"}):"Sign up"))};var J=function(){var e=Object(n.useContext)(L),t=Object(i.g)(),a=Object(n.useState)(""),l=Object(h.a)(a,2),c=l[0],o=l[1],s=Object(n.useState)(""),u=Object(h.a)(s,2),m=u[0],d=u[1],f=Object(n.useState)({email:!1,password:!1}),x=Object(h.a)(f,2),N=x[0],k=x[1],P=Object(n.useState)(!1),I=Object(h.a)(P,2),z=I[0],A=I[1],T=Object(n.useState)(!1),q=Object(h.a)(T,2),J=q[0],D=q[1];return Object(n.useEffect)((function(){k(Object(E.a)(Object(E.a)({},N),{},{email:S(c),password:C(m)}))}),[c,m]),r.a.createElement(p.a,{onSubmit:function(a){a.preventDefault(),N.email||N.password?!1===z&&A(!0):(D(!0),setTimeout((function(){e.logIn(c,m).then((function(){D(!1),t.push("/")})).catch((function(e){k(Object(E.a)(Object(E.a)({},N),{},{server:e.message})),D(!1)}))}),1e3))}},N.server&&r.a.createElement(g.a,{color:"danger"},r.a.createElement("strong",null,"Error")," ",N.server),r.a.createElement(b.a,null,r.a.createElement(v.a,{className:"sr-only",for:"email"},"Email"),r.a.createElement(j.a,{value:c,onChange:function(e){return o(e.target.value)},type:"email",name:"email",id:"email",placeholder:"Email address",invalid:z&&N.email}),r.a.createElement(O.a,null,N.email)),r.a.createElement(b.a,null,r.a.createElement(v.a,{className:"sr-only",for:"password"},"Password"),r.a.createElement(j.a,{value:m,onChange:function(e){return d(e.target.value)},type:"password",name:"password",id:"password",placeholder:"Password",invalid:z&&N.password}),r.a.createElement(O.a,null,N.password)),r.a.createElement(w.a,{block:!0,style:{display:"flex",alignItems:"center",justifyContent:"center"},color:"primary",size:"lg",disabled:J},J?r.a.createElement(y.a,{color:"light"}):"Log in"))},D=a(319),F=a(320),U=a(321),W=a(322),Z=a(323),B=a(324),$=a(325),_=a(328),G=a(329),H=a(330),M=a(326),K=function(){var e=Object(n.useContext)(L),t=e.user,a=e.authState,l=e.logOut,c=Object(i.g)(),o=Object(n.useState)(!1),s=Object(h.a)(o,2),u=s[0],m=s[1];return"loading"===a?null:r.a.createElement(D.a,{color:"light",light:!0,expand:"sm"},r.a.createElement(F.a,{href:"/"},"Authmaster2000"),r.a.createElement(U.a,{onClick:function(){return m(!u)}}),r.a.createElement(W.a,{isOpen:u,navbar:!0},r.a.createElement(Z.a,{className:"w-100 mr-auto",navbar:!0},r.a.createElement(B.a,{className:"flex-grow-1"},r.a.createElement($.a,{href:"https://github.com/fellowwws"},"GitHub")),t&&r.a.createElement(_.a,{nav:!0,inNavbar:!0},r.a.createElement(G.a,{nav:!0,caret:!0},t?t.name.first:"User"),r.a.createElement(H.a,{right:!0},r.a.createElement(M.a,{disabled:!0},"Settings"),r.a.createElement(M.a,{divider:!0}),r.a.createElement(M.a,{onClick:function(){window.confirm("Are you sure?")&&(l(),c.push("/"))}},"Log Out"))))))};function Q(){return r.a.createElement("div",null,r.a.createElement("h2",null,"Welcome!"))}function R(){return r.a.createElement(f,null,r.a.createElement("h1",{className:"text-center py-2"},"Sign Up"),r.a.createElement(q,null))}function V(){return r.a.createElement(f,null,r.a.createElement("h1",{className:"text-center py-2"},"Log In \ud83d\udd10"),r.a.createElement(J,null))}function X(e){var t=e.children,a=Object(o.a)(e,["children"]),l=Object(n.useContext)(L).user;return r.a.createElement(i.b,Object.assign({},a,{render:function(e){e.location;return l?t:r.a.createElement(i.a,{to:"/login"})}}))}var Y=function(){return"loading"===Object(n.useContext)(L).authState?null:r.a.createElement(s.a,null,r.a.createElement(K,null),r.a.createElement(i.d,null,r.a.createElement(X,{exact:!0,path:"/"},r.a.createElement(Q,null)),r.a.createElement(i.b,{path:"/signup"},r.a.createElement(R,null)),r.a.createElement(i.b,{path:"/login"},r.a.createElement(V,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(T,null,r.a.createElement(Y,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[162,1,2]]]);
//# sourceMappingURL=main.f384340c.chunk.js.map